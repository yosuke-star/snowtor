{% extends "dashboard_app/base.html" %}
{% block title %}ãƒ¬ãƒƒã‚¹ãƒ³å±¥æ­´{% endblock %}
{% load humanize %}

{% block content %}

<div class="max-w-4xl mx-auto mt-8 sm:mt-8 bg-white p-4 sm:p-6 rounded-lg shadow">

    <h1 class="text-center text-xl sm:text-2xl mb-4 sm:mb-6">äºˆç´„å±¥æ­´</h1>
    
    {% if history_data %}
        <div class="space-y-4">
            {% for item in history_data %}
                <div class="p-4 border rounded shadow-sm">
                    <dl class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 text-sm sm:text-base">
                        <dt class="font-semibold text-gray-700">ãƒ¬ãƒƒã‚¹ãƒ³æ—¥</dt>
                        <dd class="text-gray-900">{{ item.lesson.lesson_date|date:"Yå¹´mæœˆdæ—¥" }}</dd>

                        <dt class="font-semibold text-gray-700">ã‚¹ã‚­ãƒ¼å ´</dt>
                        <dd class="text-gray-900">{{ item.lesson.ski_resort.resort_name }}</dd>

                        <dt class="font-semibold text-gray-700">ç¨®åˆ¥</dt>
                        <dd class="text-gray-900">{{ item.lesson.activity_type.display_name }}</dd>

                        <dt class="font-semibold text-gray-700">ãƒ¬ãƒ™ãƒ«</dt>
                        <dd class="text-gray-900">{{ item.lesson.level_display_ja }}</dd>

                        <dt class="font-semibold text-gray-700">ãƒ¬ãƒƒã‚¹ãƒ³å½¢æ…‹</dt>
                        <dd class="text-gray-900">{{ item.lesson.lesson_type_display_ja }}</dd>

                        <dt class="font-semibold text-gray-700">æ™‚é–“å¸¯</dt>
                        <dd class="text-gray-900">{{ item.lesson.get_time_slot_display }}</dd>

                        <dt class="font-semibold text-gray-700">æ‹…å½“ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼</dt>
                        <dd class="text-gray-900">{{ item.lesson.instructor.username }}</dd>

                        <dt class="font-semibold text-gray-700">æ–™é‡‘</dt>
                        <dd class="text-gray-900">Â¥ {{ item.price|default:"-"|intcomma }}</dd>
                        
                        <dt class="font-semibold text-gray-700">ç™»éŒ²æ—¥</dt>
                        <dd class="text-gray-900">{{ item.preference.created_at|date:"Yå¹´mæœˆdæ—¥" }}</dd>
                    </dl>
                    <!-- ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ -->
                    <div class="flex sm:justify-end justify-center mt-4">
                        <form method="POST" action="{% url 'lesson_cancel' item.preference.id %}">
                            {% csrf_token %}
                            <button 
                                type="submit"
                                aria-label="ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«"
                                class="w-full sm:w-auto px-4 py-2 bg-red-500 text-white rounded-md cursor-pointer 
                                    hover:bg-red-600 text-sm sm:text-base"
                                >
                                ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                            </button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-center text-sm sm:text-base text-gray-500 mt-4 sm:mt-6">ğŸ“­ ã¾ã ãƒ¬ãƒƒã‚¹ãƒ³ã®å±¥æ­´ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
    {% endif %}
</div>
{% endblock %}
